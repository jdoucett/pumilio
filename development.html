<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pumilio by ljvillanueva</title>
    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- 
    <link href="bootstrap/css/jumbotron-narrow.css" rel="stylesheet">
    -->

    <!-- Custom styles for this template -->

        
    <!-- Bootstrap theme -->
    <link href="bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./">Pumilio</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="./">Home</a></li>
            <li><a href="installation.html">Installation</a></li>
            <li><a href="userguide.html">User Guide</a></li>
            <li><a href="adminguide.html">Administrator Guide</a></li>
            <li><a href="scripts.html">Auxiliary Scripts</a></li>
            <li class="active"><a href="development.html">Development</a></li>
            <li><a href="http://pumilio.coquipr.com/pumilio/">Demo</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    

 <div class="container" role="main">


      <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="jumbotron" style="padding-left:10px;padding-bottom:10px;">
        <h2>Development</h2>
      </div>

<h3>How this came to be</h3>
	<p>Pumilio was created out of necessity. Our lab was collecting a lot of sound data and there was no
	application that could help us manage that amount of data. In addition, we used at least two operating systems in the lab (Windows and Linux) 
	and some collaborators were using Macs. On top of that, some used Chrome as their browser, while some used Firefox and the Mac users were using Safari.
	<p>We started just putting files in folders in a network share. After a few hundred files there is no way of keeping track. Plus, 
	we were wasting time each time we had to open a file in Audacity or Raven to see its spectrogram. So, we wanted to develop a web-based application, 
	cross-browser and cross-OS compatible, that would allow us to manage and browse the sound archive.
	
<h3>First steps</h3>
	<p>One of the first instances of this application was a simple database that would display rows of spectrograms with a Flash mp3 player
	on the bottom of each. Similar to the "gallery" view of the current version of Pumilio. The problem was generating all those spectrograms.
	Using R was easy, but took too long to write the png files. The function specgram() in Python crashed with our files (15 minutes). After 
	a while, I stumbled upon a Python script written by the people of Freesound.org. This was a very fast script and I took it and 
	implemented it.
	<p>Afterwards it was all step by step. A JavaScript plugin built to crop images over the web became a selection tool for 
	zooming in a sound and filtering.
	<p>For a while, the development was done in an open way using subversion in SourceForge. 

<h3>Current development</h3>
	<p>Pumilio is now managed using git in a Github repo. If you want to contribute, just check the code in the project's website.
	Any and all ideas are welcomed. Let me know if you want to be added to the developer list. 
	<p><strong>Do not use the dev code for a production system. The code may be buggy, unstable or completely useless. Use the git repo only for 
	development. Any version with a ".dev" suffix is not stable and should be used with caution.</strong>

	<ul>
		<li><a href="https://github.com/ljvillanueva/pumilio">Browse the Github repository</a></li>
	</ul>

	The application tries to use the full power of open source libraries and applications to avoid re-inventing the wheel and to be able to use it across different systems.
	Blueprint enables a consistent layout and look, JQuery takes care of most of the interactivity, and JqueryUI provides some 
	features and styling. By using the JPlayer HTML5 audio player, we 
	allowed the use of the application in any modern browser, even in the iPad and Android tablets.
	

<h3>What is needed in the code?</h3>
	<p>Everything. The code is built to withstand most cases of human error, human stupidity, and attacks. However, it can use everything
	from improvements in the PHP and JavaScript code, usability improvements, database structure, to faster and better Python scripts. 
	Lend a hand to help build a better scientific tool.

<h3>The MySQL database for v.2.7.1</h3>

	<p>Some notes about the database. At version 26 of the database, there are 28 tables and the structure is as follows:

	<p>

	<div class="alert alert-warning"><p>This information is being updated. An updated list will be posted during March 2014</p></div>



	<div class="col-sm-12">
	
	
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">CheckAuxfiles - Table of files to be checked by the application</h3>
            </div>
            <div class="panel-body">
              <ul>
		<li>SoundID : The ID of the soundfile to check</li>
		</ul>
            </div>
          </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Collections - Collections of sounds, like CDs, DVDs, Websites or libraries</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>ColID : The unique table ID </li>
		<li>Author : The author of this collection  </li>
		<li>FilesSource : The source of the files. Options are: Field Recording, Book with CD, Automated Audio Logger, Audio CD, CD-ROM, DVD, Tape, Internet, Donation, Other </li>
		<li>CollectionName : The name to display </li>
		<li>CollectionFullCitation : Full citation of the collection </li>
		<li>MiscURL : URL for this collection, if any </li>
		<li>Notes : Notes on this collection </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Cookies - table to store the cookie values from browser</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>user_id : The user id </li>
		<li>cookie : The cookie assigned to that user </li>
		<li>hostname : Where the user visited from </li>
		<li>Timestamp : Timestamp when the cookie was created </li>
	</div>
        </div>

		        
        
        <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">FilesToAdd - table to store the groups of files from FilesToAddMembers to be added to the archive</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>FilesToAddID : The group id </li>
		<li>UserID : The ID of the user that added the files the group </li>
		<li>StartTime: Timestamp when the process started </li>
		<li>EndTime: Timestamp when the process ended </li></li>
	</div>
        </div>
        
        
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Kml - table to store the optional locations of KML/KMZ layers</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>KmlID : The unique table ID </li>
		<li>KmlName : The name to display for this layer </li>
		<li>KmlNotes : Notes for this layer </li>
		<li>KmlURL : The full URL of this KML/KMZ layer </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">ProcessLog - table with the log of the script jobs</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>LogID : The unique table ID </li>
		<li>QueueID : The ID from the Queue table </li>
		<li>Computer : Which computer ran the job </li>
		<li>TimeStamp : Timestamp of the row </li>
		<li>FileLog : The log of what the script returns, very helpful to diagnose </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">PumilioSettings - table to store application settings</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>Settings : The name to call the particular variable </li>
		<li>Value : The value of the variable </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Queue - table to manage the queue in the script jobs</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>QueueID : The unique table ID </li>
		<li>JobID : The QueueJobs ID </li>
		<li>SoundID : The Sounds ID </li>
		<li>ScriptID : The Scripts ID </li>
		<li>Priority : A priority setting </li>
		<li>Status : The status of the particular job. 0 is not done, 1 is taken, 2 is done, 3 is error, 4 is hold, 5 is not found (404 error). </li>
		<li>LastChange : Timestamp when row was last updated </li>
		<li>ClaimedDate : Timestamp when the row was claimed to run the job </li>
		<li>ProcessDoneDate : Timestamp when the job was completed </li>
		<li>ComputerDone : The computer that completed the job </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">QueueJobs - table to hold the general info of each job</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>JobID : The unique table ID </li>
		<li>UserID : The ID of the user that created the job </li>
		<li>JobName : The name given to this job </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">SampleMembers - table to hold the member sounds of a sample set</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SampleMembersID : The unique table ID </li>
		<li>SampleID : The ID of the sample set </li>
		<li>SoundID : The Sounds ID  </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Samples - table to hold general info on the sample sets</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SampleID : The unique table ID </li>
		<li>SampleName : The sample set name </li>
		<li>SampleNotes : Notes on this sample set </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Scripts - table to hold the scripts for script jobs</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>ScriptID : The unique table ID </li>
		<li>ScriptName : The name of this script </li>
		<li>ScriptPurpose : Some notes on the purpose of this script </li>
		<li>Language : The language in which the script is written, either R or Python </li>
		<li>Script : The contents of the script </li>
		<li>ScriptVersion : The version number of the script </li>
		<li>TimeStamp : Timestamp when this row was created </li>
	</div>
        </div>




          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Sensors - table to store equipment used in the data collection</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>EquipmentID : The unique table ID </li>
		<li>Recorder : The recorder for this equipment </li>
		<li>Microphone : The microphone for this equipment </li>
		<li>Notes : Other notes about this equipment, preamps, etc. </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Sites - table for the sites</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SiteID : The unique table ID </li>
		<li>SiteCode : <i>not implemented yet</i> </li>
		<li>SiteName : The name of this site </li>
		<li>SiteLat : The latitude of the site </li>
		<li>SiteLon : The longitude of the site </li>
		<li>WeatherSiteID : <i>not implemented yet</i> </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">SitesPhotos - table to hold the photographs of sites</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SitesPhotoID : The unique table ID </li>
		<li>SiteID : The ID of the site where the photograph was taken </li>
		<li>PhotoFilename : The filename of the photo </li>
		<li>ViewDegrees : The direction where the photo was taken </li>
		<li>PhotoDate : The date and time of the photo, taken from EXIF </li>
		<li>UserID : The user ID that uploaded the file </li>
		<li>PhotoNotes : Notes about this photo </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Sounds - the main table, holds the data of each sound file</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SoundID : The unique table ID </li>
		<li>PhysicalArchiveID : <i>not implemented yet</i> </li>
		<li>PhysicalArchiveType : <i>not implemented yet</i> </li>
		<li>PhysicalArchiveSoundID : <i>not implemented yet</i> </li>
		<li>OtherSoundID : The ID of this file in another database, useful when importing  </li>
		<li>ColID : The ID of the collection for this file </li>
		<li>SoundName : The name to display </li>
		<li>OriginalFilename : The file name </li>
		<li>FileSize : File size in bytes </li>
		<li>MD5_hash : The MD5 hash of the file </li>
		<li>MP3Filename : The name of the mp3 file for web listening </li>
		<li>Date : Date when the sound was recorded </li>
		<li>Time : Time when the sound was recorded </li>
		<li>SamplingRate : Sampling rate of the file </li>
		<li>BitRate : Bit rate of the file </li>
		<li>Channels : Number of channels of this file </li>
		<li>Duration : Duration of the sound, in seconds </li>
		<li>SoundFormat : Format of the sound file, for example: wav, flac, mp3, aiff, etc. </li>
		<li>SiteID : Site ID where the sound was recorded </li>
		<li>Location : <i>deprecated</i> </li>
		<li>Latitude : <i>deprecated</i> </li>
		<li>Longitude : <i>deprecated</i> </li>
		<li>EquipmentID : The ID of the equipment used to record the sound </li>
		<li>Notes : Notes about this sound file </li>
		<li>stamp : Timestamp when the row was created </li>
	</div>
        </div>





          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">SoundsImages - images (waveforms and spectrograms) generated from the sounds</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>SoundsImagesID : The unique table ID </li>
		<li>SoundID : The Sound ID from where this image was generated </li>
		<li>ImageFile : Filename of this image </li>
		<li>ImageType : What type of image, options: spectrogram, waveform, spectrogram-small, waveform-small, spectrogram-large, waveform-large </li>
		<li>ColorPalette : The color palette used for the images. Same values as the options in the script svt.py</li>
		<li>SpecMaxFreq : The maximum frequency of the spectrogram as drawn</li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">SoundsMarks - marks made in the visualization window</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>marks_ID : The unique table ID </li>
		<li>SoundID : ID of the Sound used </li>
		<li>time_min : Minimum time of the mark </li>
		<li>time_max : Maximum time of the mark </li>
		<li>freq_min : Minimum frequency of the mark </li>
		<li>freq_max : Maximum frequency of the mark </li>
		<li>mark_tag : The name used in the mark</li>
		<li>fft_size : The fft window size setting </li>
		<li>UserID : The ID of the user that stored this mark </li>
	</div>
        </div>


          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Tags - tag that holds the tags of each file</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>TagID : The unique table ID </li>
		<li>SoundID : Sound ID for this tag </li>
		<li>Tag : The tag for this sound </li>
	</div>
        </div>




          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Users - the users table, holds the data of each user in the application</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>UserID : The unique table ID </li>
		<li>UserName : The user name of this user </li>
		<li>UserFullname : Full name of this user </li>
		<li>UserEmail : The email address of this user </li>
		<li>UserPassword : The password of this user, stored as an MD5 hash </li>
		<li>UserRole : The role assigned to this user, either a regular user or an administrator. Options: user, admin </li>
		<li>UserActive : Binary value if the user is active or not. Used to deny access to particular users without deleting data. </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">WeatherData - table for weather data</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>WeatherDataID : The unique table ID </li>
		<li>WeatherSiteID : The site ID of the WeatherSites table for this data </li>
		<li>WeatherDate : Date for this row </li>
		<li>WeatherTime : Time for this row </li>
		<li>Temperature : Temperature, stored as decimal degrees in Centigrades </li>
		<li>Precipitation : Precipitation, stored as mm </li>
		<li>RelativeHumidity : Relative humidity, stored as a percentage value (without %) </li>
		<li>DewPoint : Dew point </li>
		<li>WindSpeed : Wind speed </li>
		<li>WindDirection : Direction, either cardinal or degrees, of the wind </li>
		<li>LightIntensity : Light intensity value </li>
		<li>BarometricPressure : Barometric pressure </li>
	</div>
        </div>



          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">WeatherSites - sites where weather data is collected</h3>
            </div>
            <div class="panel-body">
            <ul>
		<li>WeatherSiteID : The unique table ID </li>
		<li>WeatherSiteName : Name to display </li>
		<li>WeatherSiteLat : Latitude, in decimal degrees </li>
		<li>WeatherSiteLon : Longitude, in decimal degrees </li>
		<li>WeatherSiteElev : Elevation above sea level, in meters </li>
		<li>WeatherSiteSource : The source of this data, for example: data logger, weather service, etc. </li>
	</div>
        </div>


	</div>
	

     <div id="footer">
        <br><p class="text-muted">Pumilio is maintained by <a href="https://github.com/ljvillanueva">ljvillanueva</a></p>
    </div> 

    </div>
  </body>
</html>
